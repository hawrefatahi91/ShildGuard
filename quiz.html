<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Quiz | ShildGuard</title>

<style>
body{
  margin:0;
  min-height:100vh;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #2b1b5a, #0b2a6b);
  color:white;
}

/* ================= NAV BAR ================= */

nav{
  width:100%;
  display:flex;
  justify-content:center;
  padding-top:20px;
}

.nav-container{
  width:95%;
  max-width:1100px;
  background:rgba(255,255,255,0.08);
  backdrop-filter: blur(8px);
  border-radius:18px;
  padding:14px 22px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 0 20px rgba(0,0,0,0.3);
}

.brand{
  color:white;
  font-weight:bold;
  font-size:18px;
}

.nav-links a{
  color:white;
  text-decoration:none;
  margin-left:18px;
  font-weight:500;
}

.nav-links a:hover{
  text-decoration:underline;
}

.nav-links .active{
  color:#00c8ff;
}

/* ================= PAGE CONTENT ================= */

.container{
  width:90%;
  max-width:900px;
  margin:60px auto;
  background: rgba(255,255,255,0.08);
  padding:50px;
  border-radius:20px;
  box-shadow:0 0 40px rgba(0,0,0,0.4);
}

h1{
  text-align:center;
  margin-top:0;
  font-size:36px;
}

p{
  text-align:center;
  font-size:17px;
  margin-bottom:25px;
  line-height:1.7;
}

.pills{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  flex-wrap:wrap;
  margin: 10px 0 18px 0;
}

.pill{
  display:inline-block;
  padding:8px 12px;
  border-radius:999px;
  background: rgba(255,255,255,0.10);
  border: 1px solid rgba(255,255,255,0.18);
  font-weight:bold;
}

.progressWrap{
  width:100%;
  height:10px;
  background: rgba(255,255,255,0.12);
  border-radius:999px;
  overflow:hidden;
  margin-bottom:20px;
  border: 1px solid rgba(255,255,255,0.12);
}

.progressBar{
  height:100%;
  width:0%;
  background:#00c8ff;
  transition: width .2s ease;
}

.questionBox{
  border:1px solid rgba(255,255,255,0.18);
  border-radius:14px;
  padding:18px;
  background: rgba(0,0,0,0.10);
}

.qTitle{
  font-weight:bold;
  font-size:18px;
  margin:0 0 12px 0;
}

.option{
  display:block;
  padding:12px;
  border-radius:12px;
  margin:10px 0;
  background: rgba(255,255,255,0.10);
  cursor:pointer;
}

.option:hover{
  background: rgba(255,255,255,0.16);
}

.option input{
  margin-right:10px;
}

.explain{
  margin-top:16px;
  padding:14px;
  border-radius:12px;
  background: rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.18);
  line-height:1.6;
}

.btnRow{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  margin-top:22px;
  justify-content:center;
}

button, .btnLink{
  padding:12px 22px;
  background:#00c8ff;
  color:white;
  border:none;
  border-radius:10px;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
  text-decoration:none;
  display:inline-block;
}

button:hover, .btnLink:hover{
  background:#29d6ff;
}

button.secondary{
  background: rgba(255,255,255,0.14);
  border: 1px solid rgba(255,255,255,0.20);
}

button.secondary:hover{
  background: rgba(255,255,255,0.20);
}

button:disabled{
  opacity:0.55;
  cursor:not-allowed;
}

.resultBox{
  margin-top:26px;
  padding:18px;
  border-radius:14px;
  background: rgba(0,0,0,0.12);
  border:1px solid rgba(255,255,255,0.18);
  text-align:center;
}

.hidden{ display:none; }
</style>
</head>

<body>

<!-- ================= NAV BAR ================= -->
<nav>
  <div class="nav-container">
    <div class="brand">üõ°Ô∏è ShildGuard</div>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="mission.html">Mission</a>
      <a href="quiz.html" class="active">Quiz</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>
</nav>

<!-- ================= MAIN CONTENT ================= -->
<div class="container">

  <h1>Awareness Quiz</h1>
  <p>Answer one question at a time. After you click Next, your answer locks and you can read the explanation.</p>

  <div class="pills">
    <div class="pill" id="counterPill">Question 1/20</div>
    <div class="pill" id="statusPill">0/20 answered</div>
  </div>

  <div class="progressWrap"><div class="progressBar" id="progressBar"></div></div>

  <div class="questionBox" id="questionBox"></div>

  <div class="btnRow">
    <button id="backBtn" class="secondary" type="button">Back</button>
    <button id="nextBtn" type="button">Next</button>
    <button id="submitBtn" type="button" class="hidden">Submit</button>
    <button id="restartBtn" class="secondary" type="button">Restart</button>
  </div>

  <div id="resultBox" class="resultBox hidden"></div>

  <div id="feedbackBox" class="resultBox hidden">
    <h2 style="margin:0 0 10px 0;">Was this quiz helpful?</h2>
    <p style="margin:0 0 16px 0;">Your feedback helps improve awareness for people and organizations.</p>
    <a id="feedbackEmailBtn" class="btnLink" href="#">Send Feedback</a>
  </div>

</div>

<script>
// ===== Replace this array with your full 60 questions if you want.
// For now I‚Äôm keeping 20 (easy to expand). Add more objects the same way.
const questionsData = [
  { q:"What is phishing?", options:["A firewall system","Tricking users into giving information","Antivirus scanning","Data backup"], a:1,
    exp:"Phishing uses deception to steal sensitive data like passwords, card numbers, or MFA codes." },

  { q:"Which is a common sign of phishing?", options:["Correct grammar","Urgent message","Official domain","Personalized name"], a:1,
    exp:"Urgency is used to pressure victims to act without thinking." },

  { q:"What is smishing?", options:["Email scam","SMS scam","Phone call scam","Wi-Fi attack"], a:1,
    exp:"Smishing is phishing delivered by SMS/text messages." },

  { q:"What is vishing?", options:["Voice phishing","Video hacking","VPN attack","Malware"], a:0,
    exp:"Vishing is phishing through phone calls and voice communication." },

  { q:"What should never be shared by phone?", options:["Name","Password","Job title","Department"], a:1,
    exp:"Legitimate support teams should never ask for your password." },

  { q:"Credential harvesting is:", options:["Storing passwords","Stealing login credentials","Encrypting data","Deleting accounts"], a:1,
    exp:"Attackers collect usernames/passwords using fake pages or prompts." },

  { q:"What is social engineering?", options:["Programming","Manipulating people","Encrypting files","Scanning networks"], a:1,
    exp:"It exploits human behavior and trust rather than technical weaknesses." },

  { q:"Pretexting is:", options:["Virus","Fake story","Encryption","Backup"], a:1,
    exp:"Pretexting is creating a believable scenario to obtain information or access." },

  { q:"Baiting example:", options:["Free USB labeled ‚ÄúSalaries‚Äù","Firewall","Patch update","Password change"], a:0,
    exp:"Baiting uses curiosity/temptation to lure victims into unsafe actions." },

  { q:"What does 2FA/MFA do?", options:["Removes passwords","Adds an extra verification step","Speeds up login","Disables antivirus"], a:1,
    exp:"MFA adds another factor so a stolen password alone is not enough." },

  { q:"Unexpected password reset email ‚Äî best action?", options:["Click the link","Reply","Ignore forever","Go to the site/app manually"], a:3,
    exp:"Avoid email links. Use a trusted bookmark or type the official URL." },

  { q:"Safest way to check a link?", options:["Hover/preview it","Click it quickly","Reply to ask","Share it"], a:0,
    exp:"Previewing the URL helps you spot lookalike or suspicious domains." },

  { q:"Why avoid password reuse?", options:["It slows typing","One breach can compromise many accounts","It breaks Wi-Fi","It disables MFA"], a:1,
    exp:"Attackers use leaked passwords on other sites (credential stuffing)." },

  { q:"A CEO asks you to buy gift cards urgently. Likely:", options:["Normal","CEO impersonation scam","HR request","Legal audit"], a:1,
    exp:"Urgent gift card requests are a common business email scam." },

  { q:"What is spear phishing?", options:["Mass phishing","Targeted phishing","Only phone scams","A virus"], a:1,
    exp:"Spear phishing is customized and aimed at a specific person/org." },

  { q:"Why are attachments risky?", options:["Large size","Can hide malware","Slow internet","Ugly formatting"], a:1,
    exp:"Attachments can contain malware, scripts, or disguised executables." },

  { q:"Which emotion is commonly exploited?", options:["Joy","Fear/Urgency","Calm","Pride"], a:1,
    exp:"Fear and urgency push fast decisions without verification." },

  { q:"What should you do if you think you clicked a malicious link at work?", options:["Ignore","Disconnect & report to IT/security","Share with coworkers","Try again"], a:1,
    exp:"Report quickly so security can contain and protect others." },

  { q:"Safest action if unsure whether a message is legitimate?", options:["Ignore forever","Click to see what happens","Verify via official channel/IT support","Reply asking details"], a:2,
    exp:"When in doubt, verify using trusted contact info and official channels." }
];

// ===== State =====
let currentIndex = 0;
const answers = new Array(questionsData.length).fill(null);
const stage = new Array(questionsData.length).fill("answer"); // answer -> review

// ===== Elements =====
const questionBox = document.getElementById("questionBox");
const counterPill = document.getElementById("counterPill");
const statusPill  = document.getElementById("statusPill");
const progressBar = document.getElementById("progressBar");

const backBtn   = document.getElementById("backBtn");
const nextBtn   = document.getElementById("nextBtn");
const submitBtn = document.getElementById("submitBtn");
const restartBtn= document.getElementById("restartBtn");

const resultBox  = document.getElementById("resultBox");
const feedbackBox= document.getElementById("feedbackBox");
const feedbackEmailBtn = document.getElementById("feedbackEmailBtn");

function answeredCount(){ return answers.filter(v => v !== null).length; }

function render(){
  const total = questionsData.length;
  const q = questionsData[currentIndex];
  const isLast = currentIndex === total - 1;

  counterPill.textContent = `Question ${currentIndex + 1}/${total}`;
  statusPill.textContent  = `${answeredCount()}/${total} answered`;

  const progress = Math.round((currentIndex / Math.max(1,(total - 1))) * 100);
  progressBar.style.width = `${progress}%`;

  backBtn.disabled = currentIndex === 0;

  nextBtn.textContent = (stage[currentIndex] === "answer") ? "Next" : "Next Question";

  // submit only when last AND in review stage
  if(isLast && stage[currentIndex] === "review"){
    submitBtn.classList.remove("hidden");
    nextBtn.classList.add("hidden");
  } else {
    submitBtn.classList.add("hidden");
    nextBtn.classList.remove("hidden");
  }

  // options
  let optionsHtml = "";
  q.options.forEach((opt, i) => {
    const checked = (answers[currentIndex] === i) ? "checked" : "";
    const disabled = (stage[currentIndex] === "review") ? "disabled" : "";
    optionsHtml += `
      <label class="option">
        <input type="radio" name="opt" value="${i}" ${checked} ${disabled}>
        ${opt}
      </label>
    `;
  });

  let explainHtml = "";
  if(stage[currentIndex] === "review"){
    const correctText = q.options[q.a];
    const isCorrect = answers[currentIndex] === q.a;
    explainHtml = `
      <div class="explain" style="${isCorrect ? '' : ''}">
        <strong>Correct Answer:</strong> ${correctText}<br>
        <strong>Explanation:</strong> ${q.exp}
      </div>
    `;
  }

  questionBox.innerHTML = `
    <div class="qTitle">${currentIndex + 1}) ${q.q}</div>
    ${optionsHtml}
    ${explainHtml}
  `;

  resultBox.classList.add("hidden");
  feedbackBox.classList.add("hidden");
}

function captureSelection(){
  const picked = document.querySelector('input[name="opt"]:checked');
  answers[currentIndex] = picked ? Number(picked.value) : null;
}

nextBtn.addEventListener("click", () => {
  if(stage[currentIndex] === "answer"){
    captureSelection();
    if(answers[currentIndex] === null){
      alert("Please select an answer before continuing.");
      return;
    }
    stage[currentIndex] = "review"; // lock + show explanation
    render();
    return;
  }

  // review -> next question
  if(currentIndex < questionsData.length - 1){
    currentIndex++;
    render();
  }
});

backBtn.addEventListener("click", () => {
  if(currentIndex > 0){
    currentIndex--;
    render();
  }
});

restartBtn.addEventListener("click", () => {
  if(confirm("Restart the quiz? Your answers will be cleared.")){
    for(let i=0;i<answers.length;i++) answers[i] = null;
    for(let i=0;i<stage.length;i++) stage[i] = "answer";
    currentIndex = 0;
    render();
  }
});

function scoreQuiz(){
  let score = 0;
  for(let i=0;i<questionsData.length;i++){
    if(answers[i] === questionsData[i].a) score++;
  }
  return score;
}

function buildFeedbackEmail(score){
  const total = questionsData.length;
  const percent = Math.round((score / total) * 100);
  const subject = encodeURIComponent("ShildGuard Quiz Feedback");
  const body = encodeURIComponent(
    `Hi ShildGuard team,\n\nI completed the quiz.\nScore: ${score}/${total} (${percent}%)\n\nWas it helpful? (yes/no): \nWhat should be improved?: \n\nThanks!`
  );
  return `mailto:shildguard.supp@gmail.com?subject=${subject}&body=${body}`;
}

submitBtn.addEventListener("click", () => {
  const unanswered = answers.filter(v => v === null).length;
  if(unanswered > 0){
    alert(`You still have ${unanswered} unanswered question(s).`);
    return;
  }

  const score = scoreQuiz();
  const total = questionsData.length;
  const percent = Math.round((score / total) * 100);

  resultBox.classList.remove("hidden");
  resultBox.innerHTML = `<h2 style="margin:0 0 10px 0;">Your Score</h2>
    <div style="font-size:20px; font-weight:bold;">${score}/${total} (${percent}%)</div>`;

  feedbackBox.classList.remove("hidden");
  feedbackEmailBtn.href = buildFeedbackEmail(score);
  resultBox.scrollIntoView({behavior:"smooth"});
});

// live capture only in answer stage
questionBox.addEventListener("change", (e) => {
  if(e.target && e.target.name === "opt" && stage[currentIndex] === "answer"){
    answers[currentIndex] = Number(e.target.value);
    statusPill.textContent = `${answeredCount()}/${questionsData.length} answered`;
  }
});

render();
</script>

</body>
</html>
