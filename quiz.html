<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Quiz | ShildGuard</title>

<style>
  :root{
    --bg1:#2b1b5a;
    --bg2:#0b2a6b;
    --card:rgba(255,255,255,0.08);
    --card2:rgba(0,0,0,0.10);
    --border:rgba(255,255,255,0.18);
    --accent:#00c8ff;
    --accent2:#2ad6ff;
  }

  *{ box-sizing:border-box; }

  body{
    margin:0;
    min-height:100vh;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    color:#fff;
  }

  /* NAVBAR */
  nav{
    width:100%;
    display:flex;
    justify-content:center;
    padding:16px 0 0;
  }
  .nav-container{
    width:95%;
    max-width:1100px;
    background:var(--card);
    backdrop-filter: blur(8px);
    border-radius:18px;
    padding:14px 18px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 0 20px rgba(0,0,0,0.25);
  }
  .brand{
    font-weight:bold;
    font-size:18px;
    display:flex;
    align-items:center;
    gap:10px;
    white-space:nowrap;
  }
  .nav-links{
    display:flex;
    gap:14px;
    flex-wrap:wrap;
    justify-content:flex-end;
  }
  .nav-links a{
    color:#fff;
    text-decoration:none;
    font-weight:500;
    padding:6px 8px;
    border-radius:10px;
  }
  .nav-links a:hover{ text-decoration:underline; }
  .nav-links .active{ color:var(--accent); }

  /* PAGE CONTAINER */
  .wrap{
    width:92%;
    max-width:920px;
    margin:26px auto 70px;
    background:var(--card);
    border-radius:22px;
    padding:26px;
    box-shadow:0 0 40px rgba(0,0,0,0.35);
  }

  .title{
    text-align:center;
    margin:10px 0 6px;
    font-size: clamp(24px, 4vw, 38px);
    font-weight:800;
  }
  .subtitle{
    text-align:center;
    margin:0 0 18px;
    opacity:0.9;
    line-height:1.6;
    font-size: clamp(14px, 2.2vw, 16px);
  }

  .meta{
    display:flex;
    justify-content:space-between;
    gap:12px;
    flex-wrap:wrap;
    align-items:center;
    margin-top:8px;
  }
  .pill{
    background:rgba(255,255,255,0.10);
    border:1px solid var(--border);
    padding:8px 12px;
    border-radius:999px;
    font-weight:bold;
    font-size:14px;
  }

  .progressWrap{
    width:100%;
    height:10px;
    background: rgba(255,255,255,0.14);
    border:1px solid rgba(255,255,255,0.12);
    border-radius:999px;
    overflow:hidden;
    margin:14px 0 18px;
  }
  .progressBar{
    height:100%;
    width:0%;
    background:var(--accent);
    transition:width .2s ease;
  }

  /* QUESTION + OPTIONS (VERTICAL, MOBILE FRIENDLY) */
  .card{
    background:var(--card2);
    border:1px solid var(--border);
    border-radius:16px;
    padding:18px;
  }

  .qText{
    font-size: clamp(18px, 2.8vw, 22px);
    font-weight:800;
    margin:0 0 14px;
    line-height:1.35;
  }

  .options{
    display:flex;
    flex-direction:column;
    gap:10px;
  }

  .option{
    display:flex;
    gap:12px;
    align-items:flex-start;
    padding:12px 12px;
    border-radius:14px;
    background:rgba(255,255,255,0.10);
    border:1px solid rgba(255,255,255,0.10);
    cursor:pointer;
    user-select:none;
    transition: transform .05s ease, background .15s ease;
  }
  .option:hover{ background:rgba(255,255,255,0.16); }
  .option:active{ transform: scale(0.995); }

  .option input{
    margin-top:3px;
    transform: scale(1.05);
    cursor:pointer;
  }
  .optText{
    line-height:1.3;
    font-size:16px;
  }

  .option.disabled{
    opacity:0.88;
    cursor:not-allowed;
  }
  .option.disabled:hover{ background:rgba(255,255,255,0.10); }

  .explain{
    margin-top:14px;
    padding:12px;
    border-radius:14px;
    background: rgba(0,0,0,0.18);
    border:1px solid rgba(255,255,255,0.18);
    line-height:1.6;
    font-size:15px;
  }

  .btnRow{
    display:flex;
    justify-content:center;
    gap:12px;
    flex-wrap:wrap;
    margin-top:16px;
  }

  button, a.btn{
    appearance:none;
    border:none;
    padding:12px 18px;
    border-radius:12px;
    font-weight:800;
    cursor:pointer;
    font-size:16px;
    text-decoration:none;
    display:inline-block;
    color:#fff;
    background:var(--accent);
  }
  button:hover, a.btn:hover{ background:var(--accent2); }

  button.secondary{
    background: rgba(255,255,255,0.14);
    border:1px solid rgba(255,255,255,0.22);
  }
  button.secondary:hover{
    background: rgba(255,255,255,0.20);
  }
  button:disabled{
    opacity:0.55;
    cursor:not-allowed;
  }

  .resultBox{
    margin-top:18px;
    padding:16px;
    border-radius:16px;
    background: rgba(0,0,0,0.14);
    border:1px solid rgba(255,255,255,0.18);
    text-align:center;
  }
  .hidden{ display:none; }

  /* Mobile tweaks */
  @media (max-width: 520px){
    .wrap{ padding:18px; }
    .nav-container{ padding:12px 14px; }
    .nav-links{ gap:8px; }
    .nav-links a{ padding:6px 6px; }
    button, a.btn{ width:100%; text-align:center; }
    .btnRow{ gap:10px; }
  }
</style>
</head>

<body>

<!-- NAVBAR -->
<nav>
  <div class="nav-container">
    <div class="brand">üõ°Ô∏è ShildGuard</div>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="mission.html">Mission</a>
      <a href="quiz.html" class="active">Quiz</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>
</nav>

<!-- CONTENT -->
<div class="wrap">
  <div class="title">Cybersecurity Awareness Quiz</div>
  <div class="subtitle">
    Random order. One question at a time. After you click Next, your answer is locked and cannot be changed.
  </div>

  <div class="meta">
    <div class="pill" id="counterPill">Question 1 / 30</div>
    <div class="pill" id="statusPill">0 / 30 answered</div>
  </div>

  <div class="progressWrap"><div class="progressBar" id="progressBar"></div></div>

  <div class="card" id="quizCard"></div>

  <div class="btnRow">
    <button id="backBtn" class="secondary" type="button">Back</button>
    <button id="nextBtn" type="button">Next</button>
    <button id="restartBtn" class="secondary" type="button">Restart</button>
  </div>

  <div id="resultBox" class="resultBox hidden"></div>

  <div id="feedbackBox" class="resultBox hidden">
    <h3 style="margin:0 0 10px 0;">Was this quiz helpful?</h3>
    <p style="margin:0 0 14px 0; opacity:.9;">Your feedback helps improve awareness for people and organizations.</p>
    <a id="feedbackEmailBtn" class="btn" href="#">Send Feedback</a>
  </div>
</div>

<script>
/* ========= Shuffle ========= */
function shuffleArray(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
}

/* ========= Questions (30) ========= */
let questions = [
  // Phishing & Email Security
  {q:"What is phishing?",o:["Antivirus scanning","Tricking users into giving sensitive info","Data encryption","Firewall filtering"],a:1,e:"Phishing uses deception to steal sensitive data like passwords or card numbers."},
  {q:"Common sign of phishing?",o:["Correct spelling","Urgent message","No links","Friendly greeting"],a:1,e:"Urgency pressures victims to act without verifying."},
  {q:"Before clicking a link you should?",o:["Click it","Forward it","Hover/preview the URL","Disable antivirus"],a:2,e:"Previewing the URL helps you spot fake domains and suspicious links."},
  {q:"Unexpected attachment from unknown sender?",o:["Open it","Save it","Delete & report","Rename it"],a:2,e:"Unknown attachments can contain malware; report it through proper channels."},
  {q:"What is spear phishing?",o:["Mass phishing","Phone scam","Targeted phishing","Virus"],a:2,e:"Spear phishing is targeted and tailored to a specific person or organization."},

  // Passwords & Authentication
  {q:"Which password is strongest?",o:["Password123","Summer2024","P@ssword","9f#Q!Lk2@Zx8"],a:3,e:"Strong passwords are long, random, and unique."},
  {q:"Why avoid password reuse?",o:["Slows login","One breach affects many accounts","Uses more memory","Breaks Wi-Fi"],a:1,e:"Password reuse enables credential stuffing across multiple sites."},
  {q:"What does MFA/2FA do?",o:["Removes passwords","Adds extra verification","Encrypts Wi-Fi","Blocks malware"],a:1,e:"MFA adds a second factor so a stolen password alone isn‚Äôt enough."},
  {q:"Best place to store passwords?",o:["Sticky note","Email draft","Password manager","Notebook"],a:2,e:"Password managers store credentials securely and can generate strong passwords."},
  {q:"If your password is leaked, what should you do first?",o:["Ignore","Change the password","Post online","Reboot PC"],a:1,e:"Change your password immediately and enable MFA if available."},

  // Social Engineering
  {q:"Social engineering mainly targets:",o:["Hardware","Networks","People","Firewalls"],a:2,e:"Social engineering manipulates people, not systems."},
  {q:"Pretexting means:",o:["Malware","Fake story","Encryption","Backup"],a:1,e:"Pretexting uses a believable scenario to trick someone into sharing info or access."},
  {q:"Authority attacks involve pretending to be:",o:["A gamer","A stranger","A boss/IT/Police","A student"],a:2,e:"Attackers exploit authority to pressure compliance."},
  {q:"Baiting example:",o:["Patch update","Free USB drive","Firewall rule","Backup reminder"],a:1,e:"Baiting uses curiosity/temptation to lure victims."},
  {q:"Tailgating refers to:",o:["Email scam","Entering behind someone into a secure area","USB infection","VPN attack"],a:1,e:"Tailgating is physical intrusion by following authorized personnel."},

  // Malware & Ransomware
  {q:"What is ransomware?",o:["Spyware","Locks files for payment","Firewall","Backup software"],a:1,e:"Ransomware encrypts or locks your files and demands payment."},
  {q:"Malware can spread through:",o:["Attachments","Fake websites","USB drives","All of the above"],a:3,e:"Malware spreads via links, downloads, attachments, and removable media."},
  {q:"What is spyware?",o:["Antivirus","Tracks user activity secretly","VPN","Backup tool"],a:1,e:"Spyware collects information about you without permission."},
  {q:"Best defense against malware:",o:["Disable updates","Antivirus + updates","Public Wi-Fi","Reusing passwords"],a:1,e:"Updates and endpoint protection reduce risk from known vulnerabilities."},
  {q:"If ransomware infects your PC:",o:["Pay immediately","Disconnect and report","Ignore it","Post online"],a:1,e:"Disconnect to limit spread and report to IT/security immediately."},

  // Safe Browsing & Devices
  {q:"Safest way to access a website:",o:["Email link","Pop-up link","Bookmark or manual URL","Random search result"],a:2,e:"Bookmarks/manual URLs reduce the chance of landing on a fake site."},
  {q:"HTTPS means:",o:["The site is trusted","The connection is encrypted","No malware exists","Government verified"],a:1,e:"HTTPS encrypts traffic but doesn‚Äôt guarantee the site is legitimate."},
  {q:"Public Wi-Fi risk?",o:["Faster speed","Man-in-the-middle attacks","Better encryption","No risk"],a:1,e:"Unsafe Wi-Fi can allow attackers to intercept or manipulate traffic."},
  {q:"Best action before installing software:",o:["Skip license","Verify the source","Disable antivirus","Share the link"],a:1,e:"Install software only from trusted/official sources."},
  {q:"Why lock your screen?",o:["Save battery","Reduce shoulder surfing/unauthorized access","Faster boot","Hide wallpaper"],a:1,e:"A locked screen prevents someone from using your device when you step away."},

  // Incident Response & Awareness
  {q:"Who is responsible for cybersecurity?",o:["IT only","Managers only","Everyone","Hackers"],a:2,e:"Security is shared‚Äîeveryone‚Äôs actions matter."},
  {q:"If you suspect phishing at work, you should:",o:["Reply","Delete only","Report and delete","Forward to friends"],a:2,e:"Reporting helps the organization respond and protect others."},
  {q:"Why report small incidents?",o:["Blame users","Detect patterns early","Waste time","Entertainment"],a:1,e:"Small reports can reveal larger campaigns early."},
  {q:"Why do attackers create urgency?",o:["Save time","Reduce rational thinking","Look professional","Encrypt data"],a:1,e:"Urgency pushes quick decisions without verification."},
  {q:"Safest action if unsure whether a message is legitimate:",o:["Click it","Reply","Verify via official channel/IT support","Ignore forever"],a:2,e:"Verify using trusted contact info and official channels before acting."}
];

shuffleArray(questions);

/* ========= State ========= */
let index = 0;
let score = 0;
// once set, answer can never be changed
const answersLocked = new Array(questions.length).fill(null);
// false = answering, true = explanation shown (Next goes to next question)
let showExplanation = false;

/* ========= Elements ========= */
const quizCard = document.getElementById("quizCard");
const counterPill = document.getElementById("counterPill");
const statusPill = document.getElementById("statusPill");
const progressBar = document.getElementById("progressBar");
const backBtn = document.getElementById("backBtn");
const nextBtn = document.getElementById("nextBtn");
const restartBtn = document.getElementById("restartBtn");
const resultBox = document.getElementById("resultBox");
const feedbackBox = document.getElementById("feedbackBox");
const feedbackEmailBtn = document.getElementById("feedbackEmailBtn");

function answeredCount(){
  return answersLocked.filter(v => v !== null).length;
}

function render(){
  const total = questions.length;
  const q = questions[index];

  counterPill.textContent = `Question ${index+1} / ${total}`;
  statusPill.textContent = `${answeredCount()} / ${total} answered`;

  const pct = Math.round((index / Math.max(1, total - 1)) * 100);
  progressBar.style.width = pct + "%";

  backBtn.disabled = index === 0;

  // lock if already answered
  const locked = answersLocked[index] !== null;
  const radiosDisabled = locked || showExplanation;

  let optionsHTML = `<div class="options">`;
  q.o.forEach((opt, i) => {
    const checked = (answersLocked[index] === i) ? "checked" : "";
    const disabled = radiosDisabled ? "disabled" : "";
    const cls = radiosDisabled ? "option disabled" : "option";
    optionsHTML += `
      <label class="${cls}">
        <input type="radio" name="opt" value="${i}" ${checked} ${disabled}>
        <div class="optText">${opt}</div>
      </label>
    `;
  });
  optionsHTML += `</div>`;

  let explainHTML = "";
  if(showExplanation && answersLocked[index] !== null){
    explainHTML = `
      <div class="explain">
        <strong>Correct Answer:</strong> ${q.o[q.a]}<br>
        <strong>Explanation:</strong> ${q.e}
      </div>
    `;
  }

  quizCard.innerHTML = `
    <div class="qText">${q.q}</div>
    ${optionsHTML}
    ${explainHTML}
  `;

  // Button label
  if(showExplanation){
    nextBtn.textContent = (index === total - 1) ? "Finish" : "Next Question";
  } else {
    nextBtn.textContent = "Next";
  }
}

function getSelected(){
  const sel = document.querySelector('input[name="opt"]:checked');
  return sel ? Number(sel.value) : null;
}

nextBtn.addEventListener("click", () => {
  // Answering stage -> lock answer + show explanation
  if(!showExplanation){
    const selected = getSelected();
    if(selected === null){
      alert("Please select an answer.");
      return;
    }
    // Lock permanently (cannot be changed later)
    answersLocked[index] = selected;

    if(selected === questions[index].a) score++;

    showExplanation = true;
    render();
    return;
  }

  // Explanation stage -> go next or finish
  if(index === questions.length - 1){
    finish();
    return;
  }

  index++;
  showExplanation = false;
  render();
});

backBtn.addEventListener("click", () => {
  if(index > 0){
    index--;
    // even when going back, answer stays locked and cannot be changed
    showExplanation = false;
    render();
  }
});

restartBtn.addEventListener("click", () => {
  if(confirm("Restart the quiz? This will clear all answers.")){
    shuffleArray(questions);
    for(let i=0;i<answersLocked.length;i++) answersLocked[i] = null;
    index = 0;
    score = 0;
    showExplanation = false;
    resultBox.classList.add("hidden");
    feedbackBox.classList.add("hidden");
    nextBtn.classList.remove("hidden");
    backBtn.classList.remove("hidden");
    render();
  }
});

function finish(){
  progressBar.style.width = "100%";

  quizCard.innerHTML = `
    <div class="qText" style="text-align:center;">Quiz Complete</div>
    <div style="text-align:center; opacity:.9;">Thanks for taking the ShildGuard awareness quiz.</div>
  `;

  resultBox.classList.remove("hidden");
  const percent = Math.round((score / questions.length) * 100);
  resultBox.innerHTML = `
    <h3 style="margin:0 0 8px 0;">Your Score</h3>
    <div style="font-size:22px; font-weight:900;">${score}/${questions.length} (${percent}%)</div>
  `;

  feedbackBox.classList.remove("hidden");
  feedbackEmailBtn.href = buildFeedbackEmail(score);

  nextBtn.classList.add("hidden");
  backBtn.classList.add("hidden");
}

function buildFeedbackEmail(scoreVal){
  const total = questions.length;
  const percent = Math.round((scoreVal / total) * 100);
  const letters = ["A","B","C","D"];

  let wrongText = "";
  for(let i=0;i<total;i++){
    const chosen = answersLocked[i];
    const correct = questions[i].a;

    if(chosen !== null && chosen !== correct){
      wrongText +=
        `Q${i+1}: ${questions[i].q}\n` +
        `Your answer: ${letters[chosen]}) ${questions[i].o[chosen]}\n` +
        `Correct answer: ${letters[correct]}) ${questions[i].o[correct]}\n\n`;
    }
  }
  if(wrongText === ""){
    wrongText = "None (all answers correct)\n\n";
  }

  const subject = encodeURIComponent("ShildGuard Quiz Feedback");
  const body = encodeURIComponent(
`Hi ShildGuard team,

I completed the quiz.
Score: ${scoreVal}/${total} (${percent}%)

Wrong Answers:
${wrongText}
Was it helpful? (yes/no):
What should be improved?:

Thanks!`
  );

  return `mailto:shildguard.supp@gmail.com?subject=${subject}&body=${body}`;
}

/* Start */
render();
</script>

</body>
</html>
