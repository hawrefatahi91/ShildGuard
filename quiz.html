<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz | ShildGuard</title>

<style>
body{
  margin:0;
  min-height:100vh;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#2b1b5a,#0b2a6b);
  color:white;
}

/* NAVBAR */
nav{
  width:100%;
  display:flex;
  justify-content:center;
  padding-top:20px;
}
.nav-container{
  width:95%;
  max-width:1100px;
  background:rgba(255,255,255,0.08);
  border-radius:18px;
  padding:14px 22px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.brand{font-weight:bold;}
.nav-links a{
  color:white;
  margin-left:18px;
  text-decoration:none;
}
.nav-links .active{color:#00c8ff}

/* CONTAINER */
.container{
  width:90%;
  max-width:900px;
  margin:60px auto;
  background:rgba(255,255,255,0.08);
  padding:50px;
  border-radius:20px;
}

/* QUIZ */
h1{text-align:center}
#counter{text-align:center;margin-top:15px;font-weight:bold;}

.progress{
  width:100%;
  height:10px;
  background:#444;
  border-radius:10px;
  overflow:hidden;
  margin:15px 0 25px;
}
.bar{
  height:100%;
  width:0%;
  background:#00c8ff;
}

.option{
  background:rgba(255,255,255,0.1);
  padding:12px;
  margin:10px 0;
  border-radius:10px;
  cursor:pointer;
}
.option input{margin-right:10px}

.explain{
  margin-top:15px;
  padding:12px;
  background:rgba(0,0,0,0.25);
  border-radius:10px;
}

.buttons{
  margin-top:25px;
  display:flex;
  justify-content:center;
  gap:15px;
}

button{
  padding:12px 22px;
  background:#00c8ff;
  border:none;
  border-radius:10px;
  color:white;
  font-weight:bold;
  cursor:pointer;
}
button:hover{background:#2ad6ff}

.hidden{display:none}

.resultBox{
  margin-top:25px;
  padding:20px;
  background:rgba(0,0,0,0.3);
  border-radius:12px;
  text-align:center;
}
</style>
</head>

<body>

<!-- NAV -->
<nav>
<div class="nav-container">
  <div class="brand">üõ°Ô∏è ShildGuard</div>
  <div class="nav-links">
    <a href="index.html">Home</a>
    <a href="mission.html">Mission</a>
    <a href="quiz.html" class="active">Quiz</a>
    <a href="contact.html">Contact</a>
  </div>
</div>
</nav>

<!-- QUIZ -->
<div class="container">

<h1>Cybersecurity Awareness Quiz</h1>

<div id="counter">Question 1 / 30</div>
<div class="progress"><div id="bar" class="bar"></div></div>

<div id="quizBox"></div>

<div class="buttons">
  <button id="nextBtn">Next</button>
</div>

<div id="resultBox" class="resultBox hidden"></div>

<div id="feedbackBox" class="resultBox hidden">
  <h2>Was this quiz helpful?</h2>
  <a id="feedbackBtn" href="#">Send Feedback</a>
</div>

</div>

<script>
// ---------- SHUFFLE ----------
function shuffle(arr){
 for(let i=arr.length-1;i>0;i--){
   const j=Math.floor(Math.random()*(i+1));
   [arr[i],arr[j]]=[arr[j],arr[i]];
 }
}

// ---------- QUESTIONS ----------
let questions=[
 {q:"What is phishing?",o:["Antivirus scanning","Tricking users into giving sensitive info","Data encryption","Firewall"],a:1,e:"Phishing steals data by deception."},
 {q:"Common sign of phishing?",o:["Correct grammar","Urgent message","Friendly greeting","No links"],a:1,e:"Urgency pressures victims."},
 {q:"Before clicking a link?",o:["Click fast","Hover over link","Forward","Disable AV"],a:1,e:"Hovering shows real URL."},
 {q:"Unexpected attachment?",o:["Open","Save","Delete & report","Rename"],a:2,e:"Attachments may contain malware."},
 {q:"What is spear phishing?",o:["Mass phishing","Targeted phishing","Virus","Phone scam"],a:1,e:"Targets specific people."},

 {q:"Strongest password?",o:["Password123","Summer2024","Hello123","9f#Q!Lk2"],a:3,e:"Random & long is strongest."},
 {q:"Why avoid reuse?",o:["Slow login","One breach affects many","Uses RAM","Breaks WiFi"],a:1,e:"One leak = many accounts."},
 {q:"What is MFA?",o:["Removes passwords","Extra verification","VPN","Firewall"],a:1,e:"Adds second factor."},
 {q:"Best place for passwords?",o:["Sticky note","Email","Password manager","Text file"],a:2,e:"Managers store securely."},
 {q:"Password leaked?",o:["Ignore","Change it","Share","Restart"],a:1,e:"Change immediately."},

 {q:"Social engineering targets?",o:["Servers","People","Routers","Firewalls"],a:1,e:"It exploits humans."},
 {q:"Pretexting?",o:["Virus","Fake story","Backup","Patch"],a:1,e:"Fake scenario."},
 {q:"Authority attack?",o:["Friend","Boss/IT","Gamer","Student"],a:1,e:"Uses authority."},
 {q:"Baiting example?",o:["Patch","Free USB","Firewall","VPN"],a:1,e:"Uses curiosity."},
 {q:"Tailgating?",o:["Phishing","Follow into secure area","Virus","VPN"],a:1,e:"Physical intrusion."},

 {q:"What is ransomware?",o:["Spyware","Locks files","Backup","Antivirus"],a:1,e:"Encrypts files."},
 {q:"Malware spreads via?",o:["Email","USB","Websites","All"],a:3,e:"Many methods."},
 {q:"Spyware does?",o:["Encrypt","Track users","Backup","Clean"],a:1,e:"Steals data silently."},
 {q:"Best malware defense?",o:["Disable updates","Antivirus+updates","Public WiFi","Reuse passwords"],a:1,e:"Layered protection."},
 {q:"Ransomware infection?",o:["Pay","Disconnect & report","Ignore","Post"],a:1,e:"Stop spread."},

 {q:"Safest site access?",o:["Email link","Popup","Bookmark/manual","Ad"],a:2,e:"Avoid links."},
 {q:"HTTPS means?",o:["Safe site","Encrypted connection","No malware","Trusted"],a:1,e:"Encrypts traffic only."},
 {q:"Public WiFi risk?",o:["Speed","MITM attack","More secure","None"],a:1,e:"Traffic interception."},
 {q:"Before installing software?",o:["Skip license","Verify source","Disable AV","Share"],a:1,e:"Use trusted sources."},
 {q:"Why lock screen?",o:["Save battery","Prevent access","Faster","Looks cool"],a:1,e:"Stops unauthorized use."},

 {q:"Who responsible for security?",o:["IT","Managers","Everyone","Hackers"],a:2,e:"Shared responsibility."},
 {q:"Suspected phishing?",o:["Reply","Delete","Report & delete","Forward"],a:2,e:"Reporting helps."},
 {q:"Why report incidents?",o:["Blame","Detect patterns","Fun","Ignore"],a:1,e:"Early detection."},
 {q:"Why urgency works?",o:["Fun","Stops thinking","Encrypts","Looks real"],a:1,e:"People panic."},
 {q:"Unsure message?",o:["Click","Reply","Verify","Ignore"],a:2,e:"Always verify."}
];

shuffle(questions);

// ---------- STATE ----------
let index=0;
let score=0;
let lockedAnswers=new Array(questions.length).fill(null);
let showExplanation=false;

// ---------- LOAD ----------
function load(){
 const q=questions[index];
 document.getElementById("counter").innerText=`Question ${index+1} / ${questions.length}`;
 document.getElementById("bar").style.width=(index/questions.length*100)+"%";

 let html=`<h3>${q.q}</h3>`;
 q.o.forEach((opt,i)=>{
   const checked=lockedAnswers[index]===i?"checked":"";
   const disabled=lockedAnswers[index]!==null?"disabled":"";
   html+=`
   <label class="option">
     <input type="radio" name="opt" value="${i}" ${checked} ${disabled}>
     ${opt}
   </label>`;
 });

 if(showExplanation){
   html+=`<div class="explain">
   <b>Correct:</b> ${q.o[q.a]}<br>${q.e}
   </div>`;
 }

 document.getElementById("quizBox").innerHTML=html;
}

// ---------- NEXT ----------
document.getElementById("nextBtn").onclick=()=>{
 if(!showExplanation){
   const sel=document.querySelector('input[name="opt"]:checked');
   if(!sel){alert("Select an answer");return;}
   lockedAnswers[index]=parseInt(sel.value);
   if(lockedAnswers[index]===questions[index].a) score++;
   showExplanation=true;
   load();
 }else{
   index++;
   showExplanation=false;
   if(index>=questions.length){
     finish();
   }else{
     load();
   }
 }
};

// ---------- FINISH ----------
function finish(){
 document.getElementById("quizBox").innerHTML="";
 document.getElementById("resultBox").classList.remove("hidden");
 document.getElementById("resultBox").innerHTML=
 `<h2>Your Score: ${score}/${questions.length}</h2>`;

 document.getElementById("feedbackBox").classList.remove("hidden");
 document.getElementById("feedbackBtn").href=buildEmail();
}

// ---------- EMAIL ----------
function buildEmail(){
 const letters=["A","B","C","D"];
 let wrong="";
 for(let i=0;i<questions.length;i++){
   if(lockedAnswers[i]!==questions[i].a){
     wrong+=`Q${i+1}: ${questions[i].q}\nYour: ${letters[lockedAnswers[i]]}) ${questions[i].o[lockedAnswers[i]]}\nCorrect: ${letters[questions[i].a]}) ${questions[i].o[questions[i].a]}\n\n`;
   }
 }
 if(wrong==="") wrong="None (all correct)\n";

 const body=encodeURIComponent(
`Hi ShildGuard team,

I completed the quiz.
Score: ${score}/${questions.length}

Wrong Answers:
${wrong}

Was it helpful? (yes/no):
What should be improved?:

Thanks!`
 );
 return `mailto:shildguard.supp@gmail.com?subject=ShildGuard Quiz Feedback&body=${body}`;
}

// START
load();
</script>

</body>
</html>
