<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ShildGuard | Quiz</title>
  <style>
    :root{
      --bg1:#2b1b5a;
      --bg2:#0b2a6b;
      --card:rgba(255,255,255,.08);
      --border:rgba(255,255,255,.18);
      --text:#ffffff;
      --muted:rgba(255,255,255,.85);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Arial, sans-serif;
      color:var(--text);
      min-height:100vh;
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      padding:20px;
    }
    .container{ width:min(900px, 100%); margin:0 auto; }

    nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 14px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.12);
      border-radius:14px;
      margin-bottom:18px;
    }
    .logo{ font-weight:800; letter-spacing:.3px; }
    .links{ display:flex; flex-wrap:wrap; gap:10px; }
    .link{
      color:var(--text);
      text-decoration:none;
      padding:9px 12px;
      border-radius:12px;
      border:1px solid transparent;
      opacity:.95;
    }
    .link:hover{ border-color:var(--border); background:rgba(255,255,255,.10); }

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      padding:18px;
      box-shadow: 0 12px 40px rgba(0,0,0,.25);
    }
    h1{ margin:0 0 8px 0; font-size:clamp(24px, 3vw, 34px); }
    p{ margin:0 0 12px 0; color:var(--muted); line-height:1.7; }

    .topRow{
      display:flex;
      gap:10px;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      margin: 10px 0 14px 0;
    }
    .pill{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.12);
      font-weight:800;
    }

    .progressWrap{
      width: 100%;
      height: 10px;
      border-radius:999px;
      background: rgba(255,255,255,.12);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
      margin-bottom: 14px;
    }
    .progressBar{
      height:100%;
      width:0%;
      background: rgba(0, 191, 255, .75);
      transition: width .2s ease;
    }

    .questionBox{
      border:1px solid var(--border);
      border-radius:14px;
      padding:14px;
      background:rgba(0,0,0,.10);
    }
    .questionTitle{
      margin:0 0 10px 0;
      font-size:16px;
      font-weight:800;
    }

    .option{
      display:block;
      padding:10px 10px;
      border-radius:12px;
      cursor:pointer;
      border:1px solid transparent;
      background: rgba(255,255,255,.06);
      margin: 8px 0;
    }
    .option:hover{
      background: rgba(255,255,255,.10);
      border-color: rgba(255,255,255,.14);
    }
    .option input{
      margin-right:10px;
      transform: translateY(1px);
    }

    .btnRow{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top:14px;
    }
    button, .btnLink{
      appearance:none;
      border:none;
      cursor:pointer;
      color:var(--text);
      background: rgba(255,255,255,.16);
      border:1px solid var(--border);
      padding:12px 16px;
      border-radius:12px;
      font-weight:900;
      transition:.15s ease;
      text-decoration:none;
      display:inline-block;
    }
    button:hover, .btnLink:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.22);
    }
    button:disabled{
      opacity:.55;
      cursor:not-allowed;
      transform:none;
    }

    .result{
      margin-top:16px;
      padding:14px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.12);
    }
    .hidden{ display:none; }
    .note{ font-size:13px; opacity:.85; margin-top:8px; }
  </style>
</head>
<body>
  <div class="container">
    <nav>
      <div class="logo">üõ°Ô∏è ShildGuard</div>
      <div class="links">
        <a class="link" href="index.html">Home</a>
        <a class="link" href="mission.html">Mission</a>
        <a class="link" href="quiz.html">Quiz</a>
        <a class="link" href="contact.html">Contact</a>
      </div>
    </nav>

    <section class="card">
      <h1>Cybersecurity Awareness Quiz</h1>
      <p>One question at a time. Choose an answer, then click Next.</p>

      <div class="topRow">
        <div class="pill" id="counterPill">Question 1/20</div>
        <div class="pill" id="statusPill">Not finished</div>
      </div>

      <div class="progressWrap" aria-label="quiz progress">
        <div class="progressBar" id="progressBar"></div>
      </div>

      <div class="questionBox" id="questionBox">
        <!-- Question renders here -->
      </div>

      <div class="btnRow">
        <button id="backBtn" type="button">Back</button>
        <button id="nextBtn" type="button">Next</button>
        <button id="submitBtn" type="button" class="hidden">Submit</button>
        <button id="restartBtn" type="button">Restart</button>
      </div>

      <div id="resultBox" class="result hidden" aria-live="polite"></div>

      <div id="feedbackBox" class="result hidden">
        <h2 style="margin:0 0 8px 0; font-size:18px;">Was this quiz helpful?</h2>
        <p style="margin:0 0 10px 0;">
          Your feedback helps people and organizations improve awareness.
        </p>
        <a id="feedbackEmailBtn" class="btnLink" href="#">Send Feedback (Email)</a>
        <div class="note">
          This opens your email app and sends to <strong>shildguard.supp@gmail.com</strong>.
        </div>
      </div>

      <div class="note">
        Scoring happens in your browser (static site friendly for GitHub Pages).
      </div>
    </section>
  </div>

  <script>
    // ======================
    // Questions (20)
    // ======================
    const questionsData = [
      { q:"What is a common sign of a phishing email?",
        options:["A familiar sender address you recognize","Urgent language asking you to act immediately","A well-written message with no links","An email that only contains your first name"],
        a:1
      },
      { q:"What should you do before clicking a link in an email?",
        options:["Click quickly to avoid missing out","Forward it to everyone","Hover over the link to preview the real URL","Reply asking the sender to resend it"],
        a:2
      },
      { q:"Which is the safest way to access your bank website?",
        options:["Click the link in a random email","Type the official URL manually or use a trusted bookmark","Use a search result without checking the domain","Ask a friend to send you the link"],
        a:1
      },
      { q:"What does 2FA (two-factor authentication) do?",
        options:["It makes your password shorter","It adds a second verification step beyond the password","It removes the need for a password","It only works on public Wi-Fi"],
        a:1
      },
      { q:"A message says your account will be locked in 10 minutes unless you log in. Best response?",
        options:["Click the link and sign in immediately","Provide your password by replying to the email","Verify through official channels (app/known website) or contact IT/support","Ignore forever and never report it"],
        a:2
      },
      { q:"Which password is strongest?",
        options:["Password123","Summer2026!","CorrectHorseBatteryStaple!27","ShildGuard"],
        a:2
      },
      { q:"What is social engineering?",
        options:["Writing secure code","Manipulating people into revealing info or doing actions","Upgrading routers","Encrypting a hard drive"],
        a:1
      },
      { q:"If an attachment ends in .exe from an unknown sender, you should:",
        options:["Open it to see what it is","Delete/report it as suspicious","Rename it to .pdf and open it","Upload it to social media"],
        a:1
      },
      { q:"What is a spoofed email?",
        options:["An email with a funny subject line","An email with encrypted attachments only","An email where the sender address is forged to look legitimate","An email sent from a mailing list"],
        a:2
      },
      { q:"Which is a safer habit on public Wi-Fi?",
        options:["Disable device updates permanently","Use a VPN and avoid sensitive logins if possible","Share your hotspot password publicly","Turn off your firewall"],
        a:1
      },
      { q:"If you entered credentials into a phishing site, what should you do?",
        options:["Do nothing","Change password immediately and report to IT/security","Wait to see if anything happens","Post about it publicly with screenshots"],
        a:1
      },
      { q:"Which detail is MOST reliable when checking an email‚Äôs legitimacy?",
        options:["The logo looks correct","The sender display name","The actual sender domain and full email address","The message uses your company name"],
        a:2
      },
      { q:"A smishing attack is phishing via:",
        options:["SMS/text messages","Phone calls only","USB devices","Printer paper"],
        a:0
      },
      { q:"What is vishing?",
        options:["Phishing over voice/phone calls","A type of firewall","A password manager feature","A secure Wi-Fi standard"],
        a:0
      },
      { q:"Why should you avoid reusing passwords?",
        options:["It makes typing slower","If one site is breached, attackers try the same password elsewhere","It reduces internet speed","It breaks antivirus software"],
        a:1
      },
      { q:"A request from ‚ÄòCEO‚Äô asks you to buy gift cards urgently. Likely:",
        options:["A normal finance process","A CEO impersonation scam","A safe HR request","A legal compliance audit"],
        a:1
      },
      { q:"What should you do with suspicious emails at work?",
        options:["Forward to coworkers as a warning (without reporting)","Report using company method (button/helpdesk) and delete","Reply asking if it‚Äôs real","Keep it in your inbox"],
        a:1
      },
      { q:"Safe way to handle software updates?",
        options:["Delay updates forever","Install updates from official sources promptly when possible","Only update when something breaks","Download updates from random popups"],
        a:1
      },
      { q:"Common goal of phishing?",
        options:["Improving your security","Stealing credentials or getting you to install malware","Reducing spam","Teaching awareness"],
        a:1
      },
      { q:"Which action best protects sensitive data?",
        options:["Sharing accounts to save time","Least privilege + strong authentication + cautious sharing","Posting files to public links for convenience","Turning off screen locks"],
        a:1
      }
    ];

    // ======================
    // State
    // ======================
    let currentIndex = 0;
    const answers = new Array(questionsData.length).fill(null);

    // ======================
    // Elements
    // ======================
    const questionBox = document.getElementById("questionBox");
    const counterPill = document.getElementById("counterPill");
    const statusPill  = document.getElementById("statusPill");
    const progressBar = document.getElementById("progressBar");

    const backBtn   = document.getElementById("backBtn");
    const nextBtn   = document.getElementById("nextBtn");
    const submitBtn = document.getElementById("submitBtn");
    const restartBtn= document.getElementById("restartBtn");

    const resultBox  = document.getElementById("resultBox");
    const feedbackBox= document.getElementById("feedbackBox");
    const feedbackEmailBtn = document.getElementById("feedbackEmailBtn");

    // ======================
    // Render question
    // ======================
    function render(){
      const total = questionsData.length;
      const q = questionsData[currentIndex];

      counterPill.textContent = `Question ${currentIndex + 1}/${total}`;

      const answeredCount = answers.filter(v => v !== null).length;
      statusPill.textContent = `${answeredCount}/${total} answered`;

      const percent = Math.round(((currentIndex) / (total - 1)) * 100);
      progressBar.style.width = `${percent}%`;

      // Buttons
      backBtn.disabled = currentIndex === 0;

      // Show Submit only on last question
      if(currentIndex === total - 1){
        nextBtn.classList.add("hidden");
        submitBtn.classList.remove("hidden");
      } else {
        nextBtn.classList.remove("hidden");
        submitBtn.classList.add("hidden");
      }

      // Build options
      let html = `
        <div class="questionTitle">${currentIndex + 1}) ${q.q}</div>
        <div role="radiogroup" aria-label="answer choices">
      `;

      q.options.forEach((opt, i) => {
        const checked = (answers[currentIndex] === i) ? "checked" : "";
        html += `
          <label class="option">
            <input type="radio" name="opt" value="${i}" ${checked}>
            ${opt}
          </label>
        `;
      });

      html += `</div>`;
      questionBox.innerHTML = html;

      // Hide results while navigating
      resultBox.classList.add("hidden");
      feedbackBox.classList.add("hidden");
    }

    // Save selected answer
    function captureSelection(){
      const picked = document.querySelector('input[name="opt"]:checked');
      answers[currentIndex] = picked ? Number(picked.value) : null;
    }

    // Navigation
    nextBtn.addEventListener("click", () => {
      captureSelection();
      // require answer before going next
      if(answers[currentIndex] === null){
        alert("Please select an answer before continuing.");
        return;
      }
      currentIndex++;
      render();
    });

    backBtn.addEventListener("click", () => {
      captureSelection();
      if(currentIndex > 0) currentIndex--;
      render();
    });

    restartBtn.addEventListener("click", () => {
      if(confirm("Restart the quiz? Your answers will be cleared.")){
        for(let i=0;i<answers.length;i++) answers[i]=null;
        currentIndex = 0;
        render();
      }
    });

    // ======================
    // Submit + Score
    // ======================
    function scoreQuiz(){
      let score = 0;
      for(let i=0;i<questionsData.length;i++){
        if(answers[i] !== null && answers[i] === questionsData[i].a) score++;
      }
      return score;
    }

    function buildFeedbackEmail(score){
      const total = questionsData.length;
      const percent = Math.round((score / total) * 100);

      // list missed questions (numbers only)
      const missed = [];
      for(let i=0;i<total;i++){
        if(answers[i] !== questionsData[i].a) missed.push(i+1);
      }

      const subject = encodeURIComponent("ShildGuard Quiz Feedback");
      const bodyLines = [
        "Hi ShildGuard team,",
        "",
        "I completed the Cybersecurity Awareness Quiz.",
        `Score: ${score}/${total} (${percent}%)`,
        missed.length ? `Questions I struggled with: ${missed.join(", ")}` : "I got all questions correct.",
        "",
        "Was it helpful? (yes/no): ",
        "What should be improved?: ",
        "",
        "Thanks!"
      ];
      const body = encodeURIComponent(bodyLines.join("\n"));
      return `mailto:shildguard.supp@gmail.com?subject=${subject}&body=${body}`;
    }

    submitBtn.addEventListener("click", () => {
      captureSelection();

      // Ensure all answered
      const unanswered = answers.filter(v => v === null).length;
      if(unanswered > 0){
        alert(`You still have ${unanswered} unanswered question(s). Please complete them before submitting.`);
        return;
      }

      const score = scoreQuiz();
      const total = questionsData.length;
      const percent = Math.round((score / total) * 100);

      let msg = "";
      if(percent >= 90) msg = "Excellent awareness ‚Äî keep it up!";
      else if(percent >= 70) msg = "Good job ‚Äî a few improvements will make you even safer.";
      else msg = "Good start ‚Äî review phishing signs and try again.";

      resultBox.classList.remove("hidden");
      resultBox.innerHTML = `
        <strong>Your Score:</strong> ${score}/${total} (${percent}%)<br>
        <div style="margin-top:8px; color: rgba(255,255,255,.9);">${msg}</div>
      `;

      feedbackBox.classList.remove("hidden");
      feedbackEmailBtn.href = buildFeedbackEmail(score);

      // Fill progress bar to 100% on submit
      progressBar.style.width = "100%";
      statusPill.textContent = "Finished";
      resultBox.scrollIntoView({behavior:"smooth", block:"start"});
    });

    // Keep selection when user clicks an option
    questionBox.addEventListener("change", (e) => {
      if(e.target && e.target.name === "opt"){
        answers[currentIndex] = Number(e.target.value);
        // update answered count pill without moving
        const answeredCount = answers.filter(v => v !== null).length;
        statusPill.textContent = `${answeredCount}/${questionsData.length} answered`;
      }
    });

    // Initial render
    render();
  </script>
</body>
</html>
