<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz | ShildGuard</title>

<style>
  body{
    margin:0;
    min-height:100vh;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#2b1b5a,#0b2a6b);
    color:white;
  }

  /* NAV */
  nav{
    width:100%;
    display:flex;
    justify-content:center;
    padding-top:20px;
  }
  .nav-container{
    width:95%;
    max-width:1100px;
    background:rgba(255,255,255,0.08);
    border-radius:18px;
    padding:14px 22px;
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .brand{font-weight:bold; font-size:18px;}
  .nav-links a{
    color:white;
    margin-left:18px;
    text-decoration:none;
    font-weight:500;
  }
  .nav-links a:hover{ text-decoration:underline; }
  .nav-links .active{ color:#00c8ff; }

  /* PAGE */
  .container{
    width:90%;
    max-width:900px;
    margin:60px auto;
    background:rgba(255,255,255,0.08);
    padding:50px;
    border-radius:20px;
    box-shadow:0 0 40px rgba(0,0,0,0.35);
  }

  h1{ text-align:center; margin-top:0; font-size:36px; }
  p{ text-align:center; opacity:0.9; line-height:1.7; }

  #counter{ text-align:center; margin-top:18px; font-weight:bold; }

  .progress{
    width:100%;
    height:10px;
    background:rgba(255,255,255,0.18);
    border-radius:999px;
    overflow:hidden;
    margin:18px 0 22px 0;
  }
  .bar{
    height:100%;
    width:0%;
    background:#00c8ff;
    transition: width .2s ease;
  }

  .questionCard{
    border:1px solid rgba(255,255,255,0.18);
    border-radius:14px;
    padding:18px;
    background: rgba(0,0,0,0.10);
  }

  .qTitle{
    font-weight:bold;
    font-size:18px;
    margin:0 0 12px 0;
  }

  .option{
    display:block;
    background:rgba(255,255,255,0.10);
    padding:12px;
    margin:10px 0;
    border-radius:10px;
    cursor:pointer;
    user-select:none;
  }
  .option:hover{ background:rgba(255,255,255,0.16); }
  .option input{ margin-right:10px; }

  .option.disabled{
    cursor:not-allowed;
    opacity:0.85;
  }
  .option.disabled:hover{
    background:rgba(255,255,255,0.10);
  }

  .explain{
    margin-top:16px;
    padding:12px;
    background:rgba(0,0,0,0.22);
    border:1px solid rgba(255,255,255,0.18);
    border-radius:12px;
    line-height:1.6;
  }

  .buttons{
    margin-top:22px;
    display:flex;
    justify-content:center;
    gap:12px;
    flex-wrap:wrap;
  }

  button, a.btn{
    padding:12px 22px;
    background:#00c8ff;
    border:none;
    border-radius:10px;
    color:white;
    font-weight:bold;
    cursor:pointer;
    text-decoration:none;
    display:inline-block;
  }
  button:hover, a.btn:hover{ background:#2ad6ff; }

  button.secondary{
    background: rgba(255,255,255,0.14);
    border:1px solid rgba(255,255,255,0.22);
  }
  button.secondary:hover{ background: rgba(255,255,255,0.20); }

  button:disabled{
    opacity:0.55;
    cursor:not-allowed;
  }

  .hidden{ display:none; }

  .resultBox{
    margin-top:26px;
    padding:18px;
    border-radius:14px;
    background: rgba(0,0,0,0.12);
    border:1px solid rgba(255,255,255,0.18);
    text-align:center;
  }
</style>
</head>

<body>

<!-- NAVBAR -->
<nav>
  <div class="nav-container">
    <div class="brand">üõ°Ô∏è ShildGuard</div>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="mission.html">Mission</a>
      <a href="quiz.html" class="active">Quiz</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>
</nav>

<!-- CONTENT -->
<div class="container">
  <h1>Cybersecurity Awareness Quiz</h1>
   <p>
    This is an awareness quiz with 6 different categories and a total of 30 questions.
  </p>

  
  <p>
    After completing the test, you will have the opportunity to submit feedback ‚Äî I greatly appreciate it if you do.
  </p>

  <div id="counter">Question 1 / 30</div>
  <div class="progress"><div id="bar" class="bar"></div></div>

  <div id="quizBox" class="questionCard"></div>

  <div class="buttons">
    <button id="backBtn" class="secondary" type="button">Back</button>
    <button id="nextBtn" type="button">Next</button>
    <button id="restartBtn" class="secondary" type="button">Restart</button>
  </div>

  <div id="resultBox" class="resultBox hidden"></div>

  <div id="feedbackBox" class="resultBox hidden">
    <h2 style="margin:0 0 10px 0;">Was this quiz helpful?</h2>
    <p style="margin:0 0 16px 0;">Your feedback helps improve awareness for people and organizations.</p>
    <a id="feedbackEmailBtn" class="btn" href="#">Send Feedback</a>
  </div>
</div>

<script>
/* ============ Random Order ============ */
function shuffleArray(array){
  for(let i = array.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

/* ============ Questions (30) ============ */
let questions = [
  // Phishing & Email Security
  {q:"What is phishing?",o:["Antivirus scanning","Tricking users into giving sensitive info","Data encryption","Firewall filtering"],a:1,e:"Phishing uses deception to steal sensitive data like passwords or card numbers."},
  {q:"Common sign of phishing?",o:["Correct spelling","Urgent message","No links","Friendly greeting"],a:1,e:"Urgency pressures victims to act without verifying."},
  {q:"Before clicking a link you should?",o:["Click it","Forward it","Hover/preview the URL","Disable antivirus"],a:2,e:"Previewing the URL helps you spot fake domains and suspicious links."},
  {q:"Unexpected attachment from unknown sender?",o:["Open it","Save it","Delete & report","Rename it"],a:2,e:"Unknown attachments can contain malware; report it through proper channels."},
  {q:"What is spear phishing?",o:["Mass phishing","Phone scam","Targeted phishing","Virus"],a:2,e:"Spear phishing is targeted and tailored to a specific person or organization."},

  // Passwords & Authentication
  {q:"Which password is strongest?",o:["Password123","Summer2024","P@ssword","9f#Q!Lk2@Zx8"],a:3,e:"Strong passwords are long, random, and unique."},
  {q:"Why avoid password reuse?",o:["Slows login","One breach affects many accounts","Uses more memory","Breaks Wi-Fi"],a:1,e:"Password reuse enables credential stuffing across multiple sites."},
  {q:"What does MFA/2FA do?",o:["Removes passwords","Adds extra verification","Encrypts Wi-Fi","Blocks malware"],a:1,e:"MFA adds a second factor so a stolen password alone isn‚Äôt enough."},
  {q:"Best place to store passwords?",o:["Sticky note","Email draft","Password manager","Notebook"],a:2,e:"Password managers store credentials securely and can generate strong passwords."},
  {q:"If your password is leaked, what should you do first?",o:["Ignore","Change the password","Post online","Reboot PC"],a:1,e:"Change your password immediately and enable MFA if available."},

  // Social Engineering
  {q:"Social engineering mainly targets:",o:["Hardware","Networks","People","Firewalls"],a:2,e:"Social engineering manipulates people, not systems."},
  {q:"Pretexting means:",o:["Malware","Fake story","Encryption","Backup"],a:1,e:"Pretexting uses a believable scenario to trick someone into sharing info or access."},
  {q:"Authority attacks involve pretending to be:",o:["A gamer","A stranger","A boss/IT/Police","A student"],a:2,e:"Attackers exploit authority to pressure compliance."},
  {q:"Baiting example:",o:["Patch update","Free USB drive","Firewall rule","Backup reminder"],a:1,e:"Baiting uses curiosity/temptation to lure victims."},
  {q:"Tailgating refers to:",o:["Email scam","Entering behind someone into a secure area","USB infection","VPN attack"],a:1,e:"Tailgating is physical intrusion by following authorized personnel."},

  // Malware & Ransomware
  {q:"What is ransomware?",o:["Spyware","Locks files for payment","Firewall","Backup software"],a:1,e:"Ransomware encrypts or locks your files and demands payment."},
  {q:"Malware can spread through:",o:["Attachments","Fake websites","USB drives","All of the above"],a:3,e:"Malware spreads via links, downloads, attachments, and removable media."},
  {q:"What is spyware?",o:["Antivirus","Tracks user activity secretly","VPN","Backup tool"],a:1,e:"Spyware collects information about you without permission."},
  {q:"Best defense against malware:",o:["Disable updates","Antivirus + updates","Public Wi-Fi","Reusing passwords"],a:1,e:"Updates and endpoint protection reduce risk from known vulnerabilities."},
  {q:"If ransomware infects your PC:",o:["Pay immediately","Disconnect and report","Ignore it","Post online"],a:1,e:"Disconnect to limit spread and report to IT/security immediately."},

  // Safe Browsing & Devices
  {q:"Safest way to access a website:",o:["Email link","Pop-up link","Bookmark or manual URL","Random search result"],a:2,e:"Bookmarks/manual URLs reduce the chance of landing on a fake site."},
  {q:"HTTPS means:",o:["The site is trusted","The connection is encrypted","No malware exists","Government verified"],a:1,e:"HTTPS encrypts traffic but doesn‚Äôt guarantee the site is legitimate."},
  {q:"Public Wi-Fi risk:",o:["Faster speed","Man-in-the-middle attacks","Better encryption","No risk"],a:1,e:"Unsafe Wi-Fi can allow attackers to intercept or manipulate traffic."},
  {q:"Best action before installing software:",o:["Skip license","Verify the source","Disable antivirus","Share the link"],a:1,e:"Install software only from trusted/official sources."},
  {q:"Why lock your screen?",o:["Save battery","Reduce shoulder surfing/unauthorized access","Faster boot","Hide wallpaper"],a:1,e:"A locked screen prevents someone from using your device when you step away."},

  // Incident Response & Awareness
  {q:"Who is responsible for cybersecurity?",o:["IT only","Managers only","Everyone","Hackers"],a:2,e:"Security is shared‚Äîeveryone‚Äôs actions matter."},
  {q:"If you suspect phishing at work, you should:",o:["Reply","Delete only","Report and delete","Forward to friends"],a:2,e:"Reporting helps the organization respond and protect others."},
  {q:"Why report small incidents?",o:["Blame users","Detect patterns early","Waste time","Entertainment"],a:1,e:"Small reports can reveal larger campaigns early."},
  {q:"Why do attackers create urgency?",o:["Save time","Reduce rational thinking","Look professional","Encrypt data"],a:1,e:"Urgency pushes quick decisions without verification."},
  {q:"Safest action if unsure whether a message is legitimate:",o:["Click it","Reply","Verify via official channel/IT support","Ignore forever"],a:2,e:"Verify using trusted contact info and official channels before acting."}
];

shuffleArray(questions);

/* ============ State ============ */
let index = 0;
let score = 0;

// answersLocked[i] = selected option index for each question
// once set, it can never change
const answersLocked = new Array(questions.length).fill(null);

// showExplainStage = false => selecting answer
// showExplainStage = true  => review/explanation, click Next goes to next question
let showExplainStage = false;

/* ============ Elements ============ */
const quizBox = document.getElementById("quizBox");
const counter = document.getElementById("counter");
const bar = document.getElementById("bar");
const backBtn = document.getElementById("backBtn");
const nextBtn = document.getElementById("nextBtn");
const restartBtn = document.getElementById("restartBtn");

const resultBox = document.getElementById("resultBox");
const feedbackBox = document.getElementById("feedbackBox");
const feedbackEmailBtn = document.getElementById("feedbackEmailBtn");

/* ============ Render ============ */
function renderQuestion(){
  const q = questions[index];

  counter.textContent = `Question ${index + 1} / ${questions.length}`;
  bar.style.width = `${Math.round((index / Math.max(1, questions.length - 1)) * 100)}%`;

  backBtn.disabled = (index === 0); // back allowed, but answers still locked

  // If answer already locked for this question, we must keep radios disabled.
  const lockedAnswer = answersLocked[index];
  const radiosDisabled = (lockedAnswer !== null) || showExplainStage;

  let html = `<div class="qTitle">${index + 1}) ${q.q}</div>`;

  q.o.forEach((opt, i) => {
    const checked = (lockedAnswer === i) ? "checked" : "";
    const disabled = radiosDisabled ? "disabled" : "";
    const labelClass = radiosDisabled ? "option disabled" : "option";

    html += `
      <label class="${labelClass}">
        <input type="radio" name="opt" value="${i}" ${checked} ${disabled}>
        ${opt}
      </label>
    `;
  });

  if(showExplainStage && answersLocked[index] !== null){
    html += `
      <div class="explain">
        <strong>Correct :</strong> ${q.o[q.a]}<br>
        <strong>Explanation:</strong> ${q.e}
      </div>
    `;
  }

  quizBox.innerHTML = html;

  // Buttons text
  nextBtn.textContent = showExplainStage ? "Next Question" : "Next";

  // If last question and in explanation stage -> finish
  if(index === questions.length - 1 && showExplainStage){
    nextBtn.textContent = "Finish";
  }
}

/* ============ Actions ============ */
function getSelectedOption(){
  const sel = document.querySelector('input[name="opt"]:checked');
  return sel ? Number(sel.value) : null;
}

nextBtn.addEventListener("click", () => {
  // If we are in answer stage, lock the answer and show explanation
  if(!showExplainStage){
    const selected = getSelectedOption();
    if(selected === null){
      alert("Please select an answer.");
      return;
    }

    // Lock it permanently
    answersLocked[index] = selected;

    // Score once, at time of lock
    if(selected === questions[index].a){
      score++;
    }

    showExplainStage = true;
    renderQuestion();
    return;
  }

  // We are in explanation stage -> move to next question or finish
  if(index === questions.length - 1){
    finishQuiz();
    return;
  }

  index++;
  showExplainStage = false;
  renderQuestion();
});

backBtn.addEventListener("click", () => {
  if(index > 0){
    index--;
    // If this question was already locked, keep explanation stage OFF initially,
    // but answer is still locked and cannot be changed.
    showExplainStage = false;
    renderQuestion();
  }
});

restartBtn.addEventListener("click", () => {
  if(confirm("Restart the quiz? Your score and locked answers will be cleared.")){
    // Re-shuffle for a fresh order
    shuffleArray(questions);
    for(let i=0;i<answersLocked.length;i++) answersLocked[i] = null;
    index = 0;
    score = 0;
    showExplainStage = false;
    resultBox.classList.add("hidden");
    feedbackBox.classList.add("hidden");
    nextBtn.classList.remove("hidden");
    backBtn.classList.remove("hidden");
    renderQuestion();
  }
});

function finishQuiz(){
  bar.style.width = "100%";
  quizBox.innerHTML = `<h2 style="margin:0 0 10px 0; text-align:center;">Quiz Complete</h2>`;

  resultBox.classList.remove("hidden");
  resultBox.innerHTML = `
    <h2 style="margin:0 0 10px 0;">Your Score</h2>
    <div style="font-size:22px; font-weight:bold;">${score}/${questions.length}</div>
  `;

  feedbackBox.classList.remove("hidden");
  feedbackEmailBtn.href = buildFeedbackEmail(score);

  // Hide nav buttons after finish
  nextBtn.classList.add("hidden");
  backBtn.classList.add("hidden");
}

function buildFeedbackEmail(scoreVal){
  const total = questions.length;
  const percent = Math.round((scoreVal / total) * 100);
  const subject = encodeURIComponent("ShildGuard Quiz Feedback");
  const body = encodeURIComponent(
    `Hi ShildGuard team,\n\nI completed the quiz.\nScore: ${scoreVal}/${total} (${percent}%)\n\nWas it helpful? (yes/no): \nWhat should be improved?: \n\nThanks!`
  );
  return `mailto:shildguard.supp@gmail.com?subject=${subject}&body=${body}`;
}

/* Start */
renderQuestion();
</script>

</body>
</html>


